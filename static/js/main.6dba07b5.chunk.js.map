{"version":3,"sources":["images/logo.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/ImagePopup.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","utils/api.js","components/App.js","index.js"],"names":["Header","className","src","headerLogo","alt","CurrentUserContext","React","createContext","Card","props","currentUser","useContext","isOwn","card","owner","_id","cardDeleteBtnClassName","isLiked","likes","some","i","cardLikeBtnClassName","link","name","onClick","onCardClick","type","onCardDelete","onCardLike","length","Main","onEditAvatar","avatar","onEditProfile","about","onAddPlace","cards","map","Footer","year","Date","getFullYear","ImagePopup","onClose","PopupWithForm","isOpen","onSubmit","method","action","noValidate","title","children","btnName","EditProfilePopup","useState","setName","description","setDescription","useEffect","e","preventDefault","onUpdateUser","minLength","maxLength","placeholder","value","onChange","target","id","required","EditAvatarPopup","avatarRef","useRef","onUpdateAvatar","current","ref","AddPlacePopup","cardNameRef","cardLinkRef","onUpdateCards","handleOriginalResponse","res","ok","json","Promise","reject","status","handleError","err","console","log","api","options","this","_url","url","_headers","headers","fetch","then","catch","userName","userInfo","body","JSON","stringify","userAvatar","cardId","authorization","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","undefined","selectedCard","setSelectedCard","closeAllPopups","setCurrentUser","getProfileInfo","setCards","getInitialCards","initialCards","Provider","changeLikeCardStatus","newCard","newCards","c","handleCardLike","deleteCard","filter","handleCardDelete","data","setProfileInfo","finally","createNewCard","setProfileAvatar","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.6dba07b5.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.a307e1c4.svg\";","import headerLogo from '../images/logo.svg';\r\n\r\nfunction Header() {\r\n  return(\r\n    <header className=\"header\">\r\n      <img src={headerLogo} alt=\"Логотип\" className=\"header__logo\" />\r\n    </header>\r\n  )\r\n}\r\n\r\nexport default Header;","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();","import React from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\r\n\r\nfunction Card(props) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const isOwn = props.card.owner._id === currentUser._id;\r\n  const cardDeleteBtnClassName = (\r\n    `element__delete ${isOwn ? 'element__delete_shown' : ''}`\r\n  );\r\n\r\n  const isLiked = props.card.likes.some(i => i._id === currentUser._id);\r\n  const cardLikeBtnClassName = (\r\n    `element__like ${isLiked ? 'element__like_active' : ''}`\r\n  );\r\n\r\n  return(\r\n    <div className=\"elements__element element\">\r\n      <img src={props.card.link} alt={`Фото ${props.card.name}`} className=\"element__image\" onClick={props.onCardClick} />\r\n      <button type=\"button\" className={cardDeleteBtnClassName} onClick={props.onCardDelete}></button>\r\n      <h3 className=\"element__title\">{props.card.name}</h3>\r\n      <div className=\"element__like-container\">\r\n        <button type=\"button\" className={cardLikeBtnClassName} onClick={props.onCardLike}></button>\r\n        <p className=\"element__like-counter\">{props.card.likes.length}</p>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Card;","import React from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\r\nimport Card from './Card.js';\r\n\r\n\r\nfunction Main(props) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  return(\r\n    <main className=\"main\">\r\n      <section className=\"profile\">\r\n        <div className=\"profile__form\">\r\n          <div className=\"profile__image-container\" onClick={props.onEditAvatar}>\r\n            <img src={currentUser.avatar} alt=\"Аватар профиля\" className=\"profile__image\" />\r\n            <div className=\"profile__image-overlay\"></div>\r\n          </div>\r\n          <div className=\"profile__info info\">\r\n            <h1 className=\"info__title\">\r\n              {currentUser.name}\r\n            </h1>\r\n            <button type=\"button\" className=\"info__edit-button\" onClick={props.onEditProfile}></button>\r\n            <p className=\"info__subtitle\">\r\n              {currentUser.about}\r\n            </p>\r\n          </div>\r\n        </div>\r\n        <button type=\"button\" className=\"profile__add-button\" onClick={props.onAddPlace}></button>\r\n      </section>\r\n      \r\n      <section className=\"elements\">\r\n        {props.cards.map((card) => (\r\n          <Card card={card} onCardClick={() => props.onCardClick(card)} onCardLike={() => props.onCardLike(card)} onCardDelete={() => props.onCardDelete(card)} key={card._id} />\r\n        ))}\r\n      </section>\r\n    </main>\r\n  )\r\n}\r\n\r\nexport default Main;","function Footer() {\r\n  const year = new Date().getFullYear();\r\n\r\n  return(\r\n    <footer className=\"footer\">\r\n      <p className=\"footer__text\">&copy; {year} Mesto Russia</p>\r\n    </footer>\r\n  )\r\n}\r\n\r\nexport default Footer;","function ImagePopup(props) {\r\n  return(\r\n    <div className={`popup popup-img popup-${props.name} ${props.card && `popup_opened`}`}>\r\n      <div className=\"popup-img__container\">\r\n        <button type=\"reset\" className=\"popup__reset popup-img__reset\" onClick={props.onClose}></button>\r\n        <figure className=\"popup-img__figure\">\r\n          <img src={props.card && props.card.link} alt={props.card && `Фото ${props.card.name}`} className=\"popup-img__image\" />\r\n          <figcaption className=\"popup-img__caption\">{props.card && props.card.name}</figcaption>\r\n        </figure>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ImagePopup;","function PopupWithForm(props) {\r\n  return(\r\n    <div className={`popup popup-form popup-${props.name} ${props.isOpen ? `popup_opened` : ``}`}>\r\n      <form onSubmit={props.onSubmit} method=\"get\" action=\"index.html\" name={props.name} className=\"popup-form__container popup-edit__container\" noValidate>\r\n        <button type=\"reset\" className={`popup__reset popup-${props.name}__reset`} onClick={props.onClose}></button>\r\n        <h2 className=\"popup-form__header\">{props.title}</h2>\r\n        {props.children}\r\n        <button type=\"submit\" className=\"popup-form__submit\">{props.btnName}</button>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default PopupWithForm;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js';\r\n\r\nfunction EditProfilePopup(props) {\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const [name, setName] = React.useState('');\r\n  const [description, setDescription] = React.useState('');\r\n\r\n  React.useEffect(() => {\r\n    setName(currentUser.name);\r\n    setDescription(currentUser.about);\r\n  }, [currentUser]);\r\n\r\n  function handleChangeName(e) {\r\n    setName(e.target.value);\r\n  }\r\n\r\n  function handleChangeDescription(e) {\r\n    setDescription(e.target.value);\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n  \r\n    // Передаём значения управляемых компонентов во внешний обработчик\r\n    props.onUpdateUser({\r\n      name,\r\n      about: description,\r\n    });\r\n  }\r\n\r\n  return(\r\n    <PopupWithForm onSubmit={handleSubmit} isOpen={props.isOpen} onClose={props.onClose} name=\"edit\" title=\"Редактировать профиль\" btnName=\"Сохранить\" children={\r\n      <>\r\n        <label className=\"popup-form__field\">\r\n          <input name=\"profile-change\" type=\"text\" minLength=\"2\" maxLength=\"40\" placeholder=\"Имя\" value={name} onChange={handleChangeName} id=\"profile-name-input\" className=\"popup-form__input popup-edit__input_name\" required />\r\n          <span className='popup-form__input-error' id='profile-name-input-error'></span>\r\n        </label>\r\n        <label className=\"popup-form__field\">\r\n          <input name=\"profile-change\" type=\"text\" minLength=\"2\" maxLength=\"200\" placeholder=\"Профессия\" value={description} onChange={handleChangeDescription} id=\"profile-job-input\" className=\"popup-form__input popup-edit__input_job\" required />\r\n          <span className='popup-form__input-error' id='profile-job-input-error'></span>\r\n        </label>\r\n      </>\r\n    } />\r\n  )\r\n}\r\n\r\nexport default EditProfilePopup;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction EditAvatarPopup(props) {\r\n  const avatarRef = React.useRef();\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n  \r\n    props.onUpdateAvatar(\r\n      avatarRef.current.value,\r\n    );\r\n  }\r\n\r\n  return(\r\n    <PopupWithForm onSubmit={handleSubmit} isOpen={props.isOpen} onClose={props.onClose} name=\"edit-avatar\" title=\"Обновить аватар\" btnName=\"Сохранить\" children={\r\n      <>\r\n        <label className=\"popup-form__field\">\r\n          <input name=\"profile-avatar-change\" type=\"url\" ref={avatarRef} placeholder=\"Ссылка\" id=\"url-input\" className=\"popup-form__input popup-edit-avatar__input\" required />\r\n          <span className='popup-form__input-error' id='url-input-error'></span>\r\n        </label>\r\n      </>\r\n    } />\r\n  )\r\n}\r\n\r\nexport default EditAvatarPopup;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction AddPlacePopup(props) {\r\n  const cardNameRef = React.useRef();\r\n  const cardLinkRef = React.useRef();\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n  \r\n    props.onUpdateCards(\r\n      cardNameRef.current.value,\r\n      cardLinkRef.current.value,\r\n    );\r\n  }\r\n\r\n  return(\r\n    <PopupWithForm onSubmit={handleSubmit} isOpen={props.isOpen} onClose={props.onClose} name=\"add\" title=\"Новое место\" btnName=\"Создать\" children={\r\n      <>\r\n        <label className=\"popup-form__field\">\r\n          <input name=\"card-add\" type=\"text\" ref={cardNameRef} minLength=\"2\" maxLength=\"30\" placeholder=\"Название\" id=\"card-title-input\" className=\"popup-form__input popup-add__input_title\" required />\r\n          <span className='popup-form__input-error' id='card-title-input-error'></span>\r\n        </label>\r\n        <label className=\"popup-form__field\">\r\n          <input name=\"card-add\" type=\"url\" ref={cardLinkRef} placeholder=\"Ссылка на картинку\" id=\"card-url-input\" className=\"popup-form__input popup-add__input_url\" required />\r\n          <span className='popup-form__input-error' id='card-url-input-error'></span>\r\n        </label>\r\n      </>\r\n    } />\r\n  )\r\n}\r\n\r\nexport default AddPlacePopup;","const handleOriginalResponse = (res) => {\r\n  if (res.ok) {\r\n    return res.json();\r\n  }\r\n\r\n  return Promise.reject(`Ошибка: ${res.status}`);\r\n};\r\n\r\nconst handleError = (err) => {\r\n  console.log(err);\r\n};\r\n\r\nclass Api {\r\n  constructor(options) {\r\n    this._url = options.url;\r\n    this._headers = options.headers;\r\n  }\r\n\r\n  getInitialCards() {\r\n    return fetch(`${this._url}/cards`, {\r\n      //карточки\r\n      method: \"GET\",\r\n      headers: this._headers,\r\n    })\r\n      .then(handleOriginalResponse)\r\n      .catch(handleError);\r\n  }\r\n\r\n  getProfileInfo() {\r\n    return fetch(`${this._url}/users/me`, {\r\n      headers: this._headers,\r\n    })\r\n      .then(handleOriginalResponse)\r\n      .catch(handleError);\r\n  }\r\n\r\n  setProfileInfo(userName, userInfo) {\r\n    return fetch(`${this._url}/users/me`, {\r\n      method: \"PATCH\",\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        name: userName,\r\n        about: userInfo,\r\n      }),\r\n    })\r\n      .then(handleOriginalResponse)\r\n      .catch(handleError);\r\n  }\r\n\r\n  setProfileAvatar(userAvatar) {\r\n    return fetch(`${this._url}/users/me/avatar`, {\r\n      method: \"PATCH\",\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        avatar: userAvatar,\r\n      }),\r\n    })\r\n      .then(handleOriginalResponse)\r\n      .catch(handleError);\r\n  }\r\n\r\n  createNewCard(name, link) {\r\n    return fetch(`${this._url}/cards`, {\r\n      method: \"POST\",\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        name: name,\r\n        link: link,\r\n      }),\r\n    })\r\n      .then(handleOriginalResponse)\r\n      .catch(handleError);\r\n  }\r\n\r\n  deleteCard(cardId) {\r\n    return fetch(`${this._url}/cards/${cardId}`, {\r\n      method: \"DELETE\",\r\n      headers: this._headers,\r\n    })\r\n      .then(handleOriginalResponse)\r\n      .catch(handleError);\r\n  }\r\n\r\n  changeLikeCardStatus(cardId, isLiked) {\r\n    if (isLiked) {\r\n      return fetch(`${this._url}/cards/likes/${cardId}`, {\r\n        method: \"PUT\",\r\n        headers: this._headers,\r\n      })\r\n        .then(handleOriginalResponse)\r\n        .catch(handleError);\r\n    } else {\r\n      return fetch(`${this._url}/cards/likes/${cardId}`, {\r\n        method: \"DELETE\",\r\n        headers: this._headers,\r\n      })\r\n        .then(handleOriginalResponse)\r\n        .catch(handleError);\r\n    }\r\n  }\r\n};\r\n\r\nconst api = new Api({\r\n  url: \"https://mesto.nomoreparties.co/v1/cohort-17\",\r\n  headers: {\r\n    authorization: \"0f98b9d9-de6c-47c4-8011-fc8d2aa2d9ac\",\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n});\r\n\r\nexport default api;","import React from 'react';\r\nimport Header from './Header.js';\r\nimport Main from './Main.js';\r\nimport Footer from './Footer.js';\r\nimport ImagePopup from './ImagePopup.js';\r\nimport PopupWithForm from './PopupWithForm.js';\r\nimport EditProfilePopup from './EditProfilePopup';\r\nimport EditAvatarPopup from './EditAvatarPopup';\r\nimport AddPlacePopup from './AddPlacePopup';\r\nimport api from '../utils/api';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction App() {\r\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\r\n  const handleEditProfileClick = () => setIsEditProfilePopupOpen(!isEditProfilePopupOpen);\r\n\r\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\r\n  const handleAddPlaceClick = () => setIsAddPlacePopupOpen(!isAddPlacePopupOpen);\r\n\r\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\r\n  const handleEditAvatarClick = () => setIsEditAvatarPopupOpen(!isEditAvatarPopupOpen);\r\n\r\n  const [selectedCard, setSelectedCard] = React.useState(undefined);\r\n\r\n  const handleCardClick = (card) => setSelectedCard(card);\r\n\r\n  const closeAllPopups = () => {\r\n    setIsAddPlacePopupOpen(false);\r\n    setIsEditProfilePopupOpen(false);\r\n    setIsEditAvatarPopupOpen(false);\r\n    setSelectedCard(undefined)\r\n  }\r\n\r\n  const [currentUser, setCurrentUser] = React.useState({name: '', about: '', avatar: ''});\r\n\r\n  React.useEffect(() => {\r\n    api.getProfileInfo()\r\n      .then(userInfo => {\r\n        setCurrentUser(userInfo);\r\n      })\r\n  }, [])\r\n\r\n  function handleUpdateUser(data) {\r\n    api.setProfileInfo(data.name, data.about)\r\n      .then((userInfo) => {\r\n        setCurrentUser(userInfo);\r\n      })\r\n      .finally(() => {\r\n        closeAllPopups();\r\n      })\r\n  }\r\n\r\n  function handleUpdateAvatar(avatar) {\r\n    api.setProfileAvatar(avatar)\r\n      .then((userAvatar) => {\r\n        setCurrentUser(userAvatar);\r\n      })\r\n      .finally(() => {\r\n        closeAllPopups();\r\n      })\r\n  }\r\n\r\n  const [cards, setCards] = React.useState([]);\r\n\r\n  React.useEffect(() => {\r\n    api.getInitialCards()\r\n      .then(initialCards => {\r\n        setCards(initialCards);\r\n      })\r\n  }, [])\r\n\r\n  function handleCardLike(card) {\r\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\r\n    \r\n    api.changeLikeCardStatus(card._id, !isLiked).then((newCard) => {\r\n      const newCards = cards.map((c) => c._id === card._id ? newCard : c);\r\n      setCards(newCards);\r\n    });\r\n  }\r\n\r\n  function handleCardDelete(card) {\r\n    api.deleteCard(card._id).then(() => {\r\n      const newCards = cards.filter((c) => c._id !== card._id);\r\n      setCards(newCards);\r\n    });\r\n  }\r\n\r\n  function handleAddPlaceSubmit(name, link) {\r\n    api.createNewCard(name, link).then((newCard) => {\r\n      setCards([newCard, ...cards]);\r\n    })\r\n    .finally(() => {\r\n      closeAllPopups();\r\n    })\r\n  }\r\n\r\n  return(\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n    <div className=\"page\">\r\n      <Header />\r\n      <Main\r\n        onEditProfile={handleEditProfileClick}\r\n        onAddPlace={handleAddPlaceClick}\r\n        onEditAvatar={handleEditAvatarClick}\r\n        onCardClick={handleCardClick}\r\n        cards={cards}\r\n        onCardLike={(card) => handleCardLike(card)}\r\n        onCardDelete={(card) => handleCardDelete(card)}\r\n      />\r\n      <Footer />\r\n\r\n      <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} onUpdateUser={handleUpdateUser} />\r\n\r\n      <AddPlacePopup isOpen={isAddPlacePopupOpen} onClose={closeAllPopups} onUpdateCards={handleAddPlaceSubmit} />\r\n      \r\n      <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups} onUpdateAvatar={handleUpdateAvatar} />\r\n      \r\n      <ImagePopup onClose={closeAllPopups} card={selectedCard} />\r\n\r\n      <PopupWithForm name=\"delete\" title=\"Вы уверены?\" btnName=\"Да\" />\r\n    </div>\r\n    </CurrentUserContext.Provider>\r\n  )\r\n}\r\n\r\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}